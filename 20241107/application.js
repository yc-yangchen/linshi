System.register([],(function(e,n){"use strict";function t(e,n){window._CCSettings=void 0,e.view.resizeWithBrowserSize(!0);var t=n.launchScene;e.director.loadScene(t,null,(function(){e.view.setDesignResolutionSize(1280,768,3)}))}return e("createApplication",(function(e){var r=e.loadJsListFile,i=e.fetchWasm,o=Promise.resolve();return(o=o.then((function(){return u("wait-for-ammo-instantiation")})).then((function(e){return(0,e.default)(i(""))}))).then((function(){return t=u,(n="import")in(e={start:s})?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e;var e,n,t}));function s(e){var n,i,o=e.findCanvas;return Promise.resolve().then((function(){return u("cc")})).then((function(e){return i=e,function(e){var n="src/settings.json";return new Promise((function(e,t){if("undefined"==typeof fsUtils||n.startsWith("http")){var r=function r(){var s=new XMLHttpRequest;s.open("GET",n),s.responseType="text",s.onload=function(){window._CCSettings=JSON.parse(s.response),e()},s.onerror=function(){i-- >0?setTimeout(r,o):t(new Error("request settings failed!"))},s.send(null)},i=3,o=2e3;r()}else{var s=fsUtils.readJsonSync(n);s instanceof Error?t(s):(window._CCSettings=s,e())}}))}()})).then((function(){return n=window._CCSettings,function(e,n,t){if(n.macros)for(var r in n.macros)e.macro[r]=n.macros[r];var i=function(e,n,t){var r={bundleVers:n.bundleVers,remoteBundles:n.remoteBundles,server:n.server,subpackages:n.subpackages},i={debugMode:n.debug?e.DebugMode.INFO:e.DebugMode.ERROR,showFPS:n.debug,frameRate:60,groupList:n.groupList,collisionMatrix:n.collisionMatrix,renderPipeline:n.renderPipeline,adapter:t("GameCanvas"),assetOptions:r,customJointTextureLayouts:n.customJointTextureLayouts||[],physics:n.physics,orientation:n.orientation,exactFitScreen:n.exactFitScreen};return i}(e,n,t),o=e.game.init(i);try{n.customLayers&&n.customLayers.forEach((function(n){e.Layers.addLayer(n.name,n.bit)}))}catch(e){}return o?Promise.resolve(o):Promise.reject()}(i,n,o).then((function(){if(!n.renderPipeline)return i.game.run()})).then((function(){if(n.scriptPackages)return e=n.scriptPackages,Promise.all(e.map((function(e){return u(e)})));var e})).then((function(){return function(e){var n=Promise.resolve();return e.forEach((function(e){n=n.then((function(){return r("src/".concat(e))}))})),n}(n.jsList)})).then((function(){return a(n.hasResourcesBundle,n.hasStartSceneBundle)})).then((function(){if(n.renderPipeline)return i.game.run()})).then((function(){i.game.onStart=t.bind(null,i,n),t(i,n)}))}))}function u(e){return n.import("".concat(e))}function a(e,n){Promise.resolve();var t=cc.AssetManager.BuiltinBundleName,r=t.MAIN,i=t.RESOURCES,o=t.START_SCENE,s=e?[i,r]:[r];return n&&s.push(o),s.reduce((function(e,n){return e.then((function(){return function(e){return new Promise((function(n,t){cc.assetManager.loadBundle(e,(function(e,r){if(e)return t(e);n(r)}))}))}(n)}))}),Promise.resolve())}})),{setters:[],execute:function(){}}}));